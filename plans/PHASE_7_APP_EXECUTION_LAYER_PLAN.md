# Phase 7: App Execution Layer (ì•± êµ¬ë™ ë ˆì´ì–´)

> **ëª©í‘œ:** KPIO OS ìœ„ì—ì„œ ì›¹ ì•±, WASM ì•±, ì¼ë¶€ Linux ë°”ì´ë„ˆë¦¬ë¥¼ ì‹¤í–‰í•  ìˆ˜ ìˆëŠ” í†µí•© ì•± ëŸ°íƒ€ì„ì„ êµ¬ì¶•í•œë‹¤.  
> **ì˜ì¡´ì„±:** Phase 5 (ì‹œìŠ¤í…œ í†µí•©), Phase 6.1-6.2 (ë„¤íŠ¸ì›Œí¬/TLS)  
> **ì˜ˆìƒ ê¸°ê°„:** 10-14ì£¼  

---

## ì „ëµ ìš”ì•½

| í‹°ì–´ | ì•± ìœ í˜• | ìš°ì„ ìˆœìœ„ | ì ‘ê·¼ ë°©ì‹ |
|------|---------|----------|-----------|
| **Tier 1** | ì›¹ ì•± (PWA) | ğŸ”´ í•„ìˆ˜ | Service Worker + Web App Manifest + ì˜¤í”„ë¼ì¸ ìŠ¤í† ë¦¬ì§€ |
| **Tier 2** | WASM/WASI ì•± | ğŸ”´ í•„ìˆ˜ | WASI Preview 2 + Component Model + ë„¤ì´í‹°ë¸Œ GUI ë°”ì¸ë”© |
| **Tier 3** | Linux ELF ë°”ì´ë„ˆë¦¬ | ğŸŸ¡ ì„ íƒ | ì •ì  ë§í¬ ELF ë¡œë” + Linux ì‹œìŠ¤ì½œ ë²ˆì—­ ë ˆì´ì–´ (ì„œë¸Œì…‹) |
| **Tier 4** | íƒ€ OS ì•± (Win/Android) | âšª ë¹„ì±„íƒ | WASM í¬ë¡œìŠ¤ ì»´íŒŒì¼ ê²½ë¡œ ì œê³µ (ë„¤ì´í‹°ë¸Œ ì—ë®¬ë ˆì´ì…˜ X) |

### Tier 4 ë¹„ì±„íƒ ì‚¬ìœ 

**Windows ì•± í˜¸í™˜ (Wine ë°©ì‹):**
- Win32 API í‘œë©´ì : ~10,000+ í•¨ìˆ˜ â†’ êµ¬í˜„ ë¶ˆê°€ëŠ¥í•œ ê·œëª¨
- PE ë¡œë”, Registry, COM, GDI/DirectX ì—ë®¬ë ˆì´ì…˜ í•„ìš” â†’ ìˆ˜ë°±ë§Œ LOC
- Wine í”„ë¡œì íŠ¸: 30ë…„, ìˆ˜ì²œ ëª… ê¸°ì—¬ì â†’ í˜„ì‹¤ì ì´ì§€ ì•ŠìŒ

**Android ì•±:**
- Dalvik/ART JVM ëŸ°íƒ€ì„ ì „ì²´ êµ¬í˜„ í•„ìš”
- Android Framework ì˜ì¡´ì„± (Activity, Service, ContentProvider...) â†’ ê±°ëŒ€í•œ í‘œë©´ì 

**ëŒ€ì•ˆ:** WASMì„ ë²”ìš© ë°”ì´ë„ˆë¦¬ í¬ë§·ìœ¼ë¡œ ì±„íƒí•˜ì—¬, ë‹¤ë¥¸ OSì˜ ì•±ì„ WASMìœ¼ë¡œ í¬ë¡œìŠ¤ ì»´íŒŒì¼í•˜ë©´ KPIOì—ì„œ ì‹¤í–‰ ê°€ëŠ¥. ì´ëŠ” ì‹¤ì§ˆì ìœ¼ë¡œ ëª¨ë“  ì–¸ì–´(C/C++/Rust/Go/C#/Swift)ì˜ ì•±ì„ ì§€ì›í•˜ë©´ì„œë„ ì»¤ë„ ë³µì¡ë„ë¥¼ ê´€ë¦¬ ê°€ëŠ¥í•œ ìˆ˜ì¤€ìœ¼ë¡œ ìœ ì§€í•œë‹¤.

---

## Phase 7.1: ì•± ëŸ°íƒ€ì„ ê¸°ë°˜ (App Runtime Foundation)

> **ëª©í‘œ:** ëª¨ë“  ì•± ìœ í˜•ì´ ê³µìœ í•˜ëŠ” í†µí•© ì•± ëª¨ë¸, ë¼ì´í”„ì‚¬ì´í´ ê´€ë¦¬, ìƒŒë“œë°•ì‹± í”„ë ˆì„ì›Œí¬ë¥¼ êµ¬ì¶•í•œë‹¤.  
> **ì˜ˆìƒ ê¸°ê°„:** 2ì£¼  
> **ì˜ì¡´ì„±:** Phase 5.1 (ì»¤ë„-ë¸Œë¼ìš°ì € í†µí•©), Phase 5.5 (ë³´ì•ˆ ê°•í™”)

### 7.1.1 í†µí•© ì•± ëª¨ë¸ (Unified App Model)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    App Manager                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ Web App  â”‚  â”‚ WASM App â”‚  â”‚ Native (ELF) App â”‚   â”‚
â”‚  â”‚ Runtime  â”‚  â”‚ Runtime  â”‚  â”‚    Runtime        â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚       â”‚              â”‚                 â”‚              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚          Capability-based Sandbox               â”‚  â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚  â”‚          Unified IPC Bus (Channel + SHM)        â”‚  â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚  â”‚          Resource Manager (CPU / Mem / GPU)      â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**AppDescriptor** (ì•± ë©”íƒ€ë°ì´í„°):
```rust
pub struct AppDescriptor {
    pub id: AppId,                    // ê³ ìœ  ì‹ë³„ì (reverse-domain: com.example.app)
    pub name: String,                 // í‘œì‹œ ì´ë¦„
    pub version: SemVer,              // ë²„ì „
    pub app_type: AppType,            // WebApp | WasmApp | NativeApp
    pub entry_point: EntryPoint,      // URL | WASM ë°”ì´íŠ¸ ê²½ë¡œ | ELF ê²½ë¡œ
    pub permissions: PermissionSet,   // ìš”ì²­ ê¶Œí•œ ëª©ë¡
    pub icon: Option<IconData>,       // ì•± ì•„ì´ì½˜ (PNG/SVG)
    pub categories: Vec<Category>,    // ì¹´í…Œê³ ë¦¬ (ìƒì‚°ì„±, ê²Œì„, ìœ í‹¸ë¦¬í‹°...)
    pub min_kpio_version: SemVer,     // ìµœì†Œ KPIO ë²„ì „
}

pub enum AppType {
    WebApp { manifest_url: String, offline_capable: bool },
    WasmApp { wasi_version: WasiVersion, component: bool },
    NativeApp { arch: Arch, abi: Abi },
}
```

**ì²´í¬ë¦¬ìŠ¤íŠ¸:**
- [ ] `AppDescriptor` êµ¬ì¡°ì²´ ë° ì§ë ¬í™” (JSON/TOML)
- [ ] `AppId` íƒ€ì… (reverse-domain í˜•ì‹ ê²€ì¦)
- [ ] `AppType` ì—´ê±°í˜• (WebApp, WasmApp, NativeApp)
- [ ] `AppState` ìƒíƒœ ë¨¸ì‹ : `Installing â†’ Installed â†’ Launching â†’ Running â†’ Suspended â†’ Terminated`
- [ ] `AppRegistry`: ì„¤ì¹˜ëœ ì•± ëª©ë¡ ì˜ì† ì €ì¥ (VFS ë‚´ `/apps/registry.json`)
- [ ] ì•±ë³„ ë°ì´í„° ë””ë ‰í† ë¦¬ ê²©ë¦¬ (`/apps/data/{app_id}/`)

### 7.1.2 ì•± ë¼ì´í”„ì‚¬ì´í´ ë§¤ë‹ˆì €

```
Install â†’ Launch â†’ Running â‡„ Suspended â†’ Terminate â†’ Uninstall
                     â†“
                  Crashed â†’ Recovery/Restart
```

**ì²´í¬ë¦¬ìŠ¤íŠ¸:**
- [ ] `AppLifecycleManager` íŠ¸ë ˆì´íŠ¸:
  - `install(descriptor) â†’ Result<AppId>`
  - `launch(app_id) â†’ Result<ProcessHandle>`
  - `suspend(app_id) â†’ Result<()>`
  - `resume(app_id) â†’ Result<()>`
  - `terminate(app_id) â†’ Result<()>`
  - `uninstall(app_id) â†’ Result<()>`
- [ ] í”„ë¡œì„¸ìŠ¤-ì•± ë§¤í•‘ í…Œì´ë¸”
- [ ] í¬ë˜ì‹œ ê°ì§€ ë° ìë™ ì¬ì‹œì‘ ì •ì±… (ìµœëŒ€ 3íšŒ)
- [ ] ë¦¬ì†ŒìŠ¤ í•´ì œ ë³´ì¥ (íŒŒì¼ í•¸ë“¤, SHM, GPU ë²„í¼)
- [ ] ì•± ìƒíƒœ ì˜ì†í™” (suspend ì‹œ ìƒíƒœ ì§ë ¬í™”)

### 7.1.3 Capability ê¸°ë°˜ ìƒŒë“œë°•ìŠ¤

ê¸°ì¡´ Phase 5.5ì˜ capability ëª¨ë¸ì„ ì•± ë ˆë²¨ë¡œ í™•ì¥:

```rust
pub struct PermissionSet {
    pub filesystem: FsPermission,     // None | ReadOnly(paths) | ReadWrite(paths)
    pub network: NetPermission,       // None | LocalOnly | FullAccess | AllowList(domains)
    pub gpu: GpuPermission,           // None | Canvas2D | WebGL | FullGPU
    pub camera: bool,
    pub microphone: bool,
    pub clipboard: ClipboardPermission, // None | Read | ReadWrite
    pub notifications: bool,
    pub background_execution: bool,
    pub ipc: IpcPermission,           // None | AllowList(app_ids)
    pub max_memory_mb: u32,           // ë©”ëª¨ë¦¬ ìƒí•œ
    pub max_cpu_percent: u8,          // CPU ìƒí•œ
}
```

**ì²´í¬ë¦¬ìŠ¤íŠ¸:**
- [ ] `PermissionSet` êµ¬ì¡°ì²´ ì •ì˜
- [ ] ëŸ°íƒ€ì„ ê¶Œí•œ ê²€ì‚¬ ë ˆì´ì–´ (ì‹œìŠ¤ì½œ í”„ë¡ì‹œ)
- [ ] ê¶Œí•œ ìš”ì²­ UI (ì‚¬ìš©ì ìŠ¹ì¸ ë‹¤ì´ì–¼ë¡œê·¸)
- [ ] ê¶Œí•œ ì˜ì† ì €ì¥ (ì•±ë³„ granted/denied ê¸°ë¡)
- [ ] ë¦¬ì†ŒìŠ¤ ì¿¼í„° ê°•ì œ (OOM killer ì—°ë™)

### 7.1.4 ì•± ê°„ IPC í”„ë ˆì„ì›Œí¬

ê¸°ì¡´ ì‹œìŠ¤ì½œ `ChannelCreate/Send/Recv` + `ShmCreate/Map`ì„ ì•± ë ˆë²¨ APIë¡œ ë˜í•‘:

**ì²´í¬ë¦¬ìŠ¤íŠ¸:**
- [ ] `AppIpcBus`: ì•± ID ê¸°ë°˜ ë©”ì‹œì§€ ë¼ìš°íŒ…
- [ ] êµ¬ì¡°í™”ëœ ë©”ì‹œì§€ í¬ë§· (í—¤ë” + í˜ì´ë¡œë“œ)
- [ ] Intent ì‹œìŠ¤í…œ: `OpenFile(path)`, `ShareText(text)`, `ViewUrl(url)` ë“± í‘œì¤€ ì¸í…íŠ¸
- [ ] íŒŒì¼ ê³µìœ  í”„ë¡œí† ì½œ (fd ì „ë‹¬ ë˜ëŠ” SHM ê¸°ë°˜)
- [ ] ì•± ë””ìŠ¤ì»¤ë²„ë¦¬: íŠ¹ì • ì¸í…íŠ¸ë¥¼ ì²˜ë¦¬í•  ìˆ˜ ìˆëŠ” ì•± ì¡°íšŒ

---

## Phase 7.2: ì›¹ ì•± í”Œë«í¼ (Web App Platform) â€” ğŸ”´ í•„ìˆ˜

> **ëª©í‘œ:** PWAë¥¼ ë„¤ì´í‹°ë¸Œ ì•±ê³¼ ë™ë“±í•œ ìˆ˜ì¤€ìœ¼ë¡œ ì„¤ì¹˜Â·ì‹¤í–‰í•˜ë©°, ì˜¤í”„ë¼ì¸ ì§€ì›ê³¼ push ì•Œë¦¼ì„ ì œê³µí•œë‹¤.  
> **ì˜ˆìƒ ê¸°ê°„:** 3ì£¼  
> **ì˜ì¡´ì„±:** Phase 7.1, Phase 6.3 (JS ì—”ì§„), Phase 6.5 (Web Platform API)

### 7.2.1 Web App Manifest ì²˜ë¦¬

W3C Web App Manifest ìŠ¤í™ íŒŒì‹± ë° ì ìš©:

```json
{
  "name": "KPIO Notes",
  "short_name": "Notes",
  "start_url": "/",
  "display": "standalone",
  "background_color": "#ffffff",
  "theme_color": "#2196F3",
  "icons": [
    { "src": "/icon-192.png", "sizes": "192x192", "type": "image/png" },
    { "src": "/icon-512.png", "sizes": "512x512", "type": "image/png" }
  ],
  "scope": "/",
  "orientation": "any"
}
```

**ì²´í¬ë¦¬ìŠ¤íŠ¸:**
- [ ] `WebAppManifest` íŒŒì„œ (JSON)
- [ ] í•„ë“œ ì²˜ë¦¬: `name`, `short_name`, `start_url`, `scope`, `display`, `orientation`
- [ ] `display` ëª¨ë“œ: `fullscreen`, `standalone`, `minimal-ui`, `browser`
- [ ] ì•„ì´ì½˜ ë‹¤ìš´ë¡œë“œ ë° ë‹¤ì¤‘ í•´ìƒë„ ì²˜ë¦¬ (192px, 512px)
- [ ] `theme_color` â†’ ìœˆë„ìš° íƒ€ì´í‹€ë°”/íƒœìŠ¤í¬ë°” ìƒ‰ìƒ ì ìš©
- [ ] `background_color` â†’ ìŠ¤í”Œë˜ì‹œ ìŠ¤í¬ë¦°
- [ ] `scope` ê¸°ë°˜ ë„¤ë¹„ê²Œì´ì…˜ ì œí•œ (ìŠ¤ì½”í”„ ë°– URL â†’ ì™¸ë¶€ ë¸Œë¼ìš°ì €)
- [ ] ì„¤ì¹˜ ê°€ëŠ¥ì„± íŒë³„: HTTPS + manifest + Service Worker ë“±ë¡ ì—¬ë¶€

### 7.2.2 Service Worker ëŸ°íƒ€ì„

**ì•„í‚¤í…ì²˜:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    ì´ë²¤íŠ¸    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Web App    â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ â”‚ Service Worker   â”‚
â”‚  (ë©”ì¸ íƒ­)   â”‚             â”‚  (ë³„ë„ JS ì»¨í…ìŠ¤íŠ¸) â”‚
â”‚             â”‚ â†â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚                  â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜   ì‘ë‹µ       â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚                              â”‚
       â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
       â””â”€â”€â”€â”€â”‚  Cache API   â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚ (VFS ê¸°ë°˜)    â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ì²´í¬ë¦¬ìŠ¤íŠ¸:**
- [ ] Service Worker ë“±ë¡ (`navigator.serviceWorker.register()`)
- [ ] SW ë¼ì´í”„ì‚¬ì´í´: `installing â†’ waiting â†’ active â†’ redundant`
- [ ] `install` ì´ë²¤íŠ¸: ì •ì  ìì› í”„ë¦¬ìºì‹œ
- [ ] `activate` ì´ë²¤íŠ¸: ì´ì „ ìºì‹œ ì •ë¦¬
- [ ] `fetch` ì´ë²¤íŠ¸ ì¸í„°ì…‰íŠ¸: ë„¤íŠ¸ì›Œí¬ ìš”ì²­ ê°€ë¡œì±„ê¸°
- [ ] ìºì‹± ì „ëµ ì§€ì›:
  - Cache First (ì˜¤í”„ë¼ì¸ ìš°ì„ )
  - Network First (ìµœì‹  ë°ì´í„° ìš°ì„ )
  - Stale While Revalidate
- [ ] Cache Storage API (`caches.open()`, `cache.put()`, `cache.match()`)
- [ ] VFS ê¸°ë°˜ ìºì‹œ ì˜ì†í™” (`/apps/cache/{app_id}/`)
- [ ] SW ì—…ë°ì´íŠ¸ ê°ì§€ ë° ê°±ì‹ 

### 7.2.3 ì˜¤í”„ë¼ì¸ ìŠ¤í† ë¦¬ì§€

**ì²´í¬ë¦¬ìŠ¤íŠ¸:**
- [ ] `localStorage` / `sessionStorage` (í‚¤-ê°’ ì €ì¥ì†Œ, 5MB ìƒí•œ)
- [ ] IndexedDB ê¸°ë³¸ êµ¬í˜„:
  - Object Store ìƒì„±/ì‚­ì œ
  - put/get/delete/clear ì˜¤í¼ë ˆì´ì…˜
  - ì¸ë±ìŠ¤ ê¸°ë°˜ ì¡°íšŒ
  - íŠ¸ëœì­ì…˜ (readonly/readwrite)
  - ì»¤ì„œ ì´í„°ë ˆì´ì…˜
- [ ] ì¿¼í„° ê´€ë¦¬: ì•±ë‹¹ ìµœëŒ€ 50MB (ì‚¬ìš©ì í™•ì¥ ê°€ëŠ¥)
- [ ] ë°ì´í„° ì˜ì†í™” (VFS `/apps/storage/{app_id}/`)

### 7.2.4 ì›¹ ì•± ìœˆë„ìš° í†µí•©

**ì²´í¬ë¦¬ìŠ¤íŠ¸:**
- [ ] `standalone` ëª¨ë“œ: ì£¼ì†Œ ë°” ì—†ëŠ” ì „ìš© ìœˆë„ìš°
- [ ] `minimal-ui` ëª¨ë“œ: ìµœì†Œ ë‚´ë¹„ê²Œì´ì…˜ (ë’¤ë¡œ/ìƒˆë¡œê³ ì¹¨ ë²„íŠ¼ë§Œ)
- [ ] íƒœìŠ¤í¬ë°” ì•„ì´ì½˜ í†µí•© (ë§¤ë‹ˆí˜ìŠ¤íŠ¸ ì•„ì´ì½˜ ì‚¬ìš©)
- [ ] ì•± ì „í™˜ (Alt+Tab) ëª©ë¡ì— PWA í‘œì‹œ
- [ ] ë°ìŠ¤í¬í†± ë°”ë¡œê°€ê¸° ìƒì„±
- [ ] ìŠ¤í”Œë˜ì‹œ ìŠ¤í¬ë¦° (background_color + icon)
- [ ] ì°½ í¬ê¸°/ìœ„ì¹˜ ê¸°ì–µ (ì„¸ì…˜ ê°„ ì˜ì†)

### 7.2.5 ì•Œë¦¼ ë° ë°±ê·¸ë¼ìš´ë“œ ë™ê¸°í™”

**ì²´í¬ë¦¬ìŠ¤íŠ¸:**
- [ ] Notification API (`Notification.requestPermission()`, `new Notification()`)
- [ ] ì»¤ë„ ì•Œë¦¼ ì„¼í„° ì—°ë™:
  - ë°ìŠ¤í¬í†± ì•Œë¦¼ í† ìŠ¤íŠ¸ ë Œë”ë§
  - ì•Œë¦¼ ê¸°ë¡ ë³´ê´€
  - ì•Œë¦¼ í´ë¦­ â†’ ì•± í¬ì»¤ìŠ¤/ì‹¤í–‰
- [ ] Background Sync API (ê¸°ë³¸):
  - `sync` ì´ë²¤íŠ¸ (ë„¤íŠ¸ì›Œí¬ ë³µê·€ ì‹œ íŠ¸ë¦¬ê±°)
  - 1íšŒì„± ë™ê¸°í™” íƒœìŠ¤í¬ ë“±ë¡
- [ ] Periodic Background Sync (ì„ íƒ):
  - ì£¼ê¸°ì  ë°±ê·¸ë¼ìš´ë“œ ì‘ì—… (ìµœì†Œ ê°„ê²© ì œí•œ)

### 7.2.6 ì›¹ ì•± ì„¤ì¹˜ UX

**ì²´í¬ë¦¬ìŠ¤íŠ¸:**
- [ ] ì„¤ì¹˜ ë°°ë„ˆ/í”„ë¡¬í”„íŠ¸ (`beforeinstallprompt` ì´ë²¤íŠ¸)
- [ ] ì„¤ì¹˜ ì§„í–‰ UI (ë‹¤ìš´ë¡œë“œ ì§„í–‰ë¥ , ì•„ì´ì½˜ í™•ì¸)
- [ ] ì„¤ì¹˜ëœ ì›¹ ì•± ëª©ë¡ ê´€ë¦¬ (ì„¤ì • â†’ ì•±)
- [ ] ì•± ì œê±° UI ë° ë°ì´í„° ì •ë¦¬ ì˜µì…˜
- [ ] ì•± ì—…ë°ì´íŠ¸ ê°ì§€ (manifest ë³€ê²½ ì‹œ ì•Œë¦¼)

---

## Phase 7.3: WASM/WASI ì•± ëŸ°íƒ€ì„ â€” ğŸ”´ í•„ìˆ˜

> **ëª©í‘œ:** WASMì„ KPIOì˜ ë²”ìš© ì•± ë°”ì´ë„ˆë¦¬ í¬ë§·ìœ¼ë¡œ í™•ë¦½í•˜ì—¬, ì„ì˜ì˜ í”„ë¡œê·¸ë˜ë° ì–¸ì–´ë¡œ ì‘ì„±ëœ ì•±ì„ ì•ˆì „í•˜ê²Œ ì‹¤í–‰í•œë‹¤.  
> **ì˜ˆìƒ ê¸°ê°„:** 3ì£¼  
> **ì˜ì¡´ì„±:** Phase 7.1, ê¸°ì¡´ runtime/ í¬ë ˆì´íŠ¸

### 7.3.1 WASI Preview 2 ì™„ì „ êµ¬í˜„

ê¸°ì¡´ `runtime/src/wasi.rs`ë¥¼ í™•ì¥í•˜ì—¬ WASI Preview 2 ì „ì²´ ì¸í„°í˜ì´ìŠ¤ ì§€ì›:

**ì²´í¬ë¦¬ìŠ¤íŠ¸:**
- [ ] `wasi:filesystem` â€” íŒŒì¼/ë””ë ‰í† ë¦¬ CRUD, stat, readdir
- [ ] `wasi:sockets` â€” TCP/UDP ì†Œì¼“ (connect, bind, listen, accept)
- [ ] `wasi:clocks` â€” ëª¨ë…¸í† ë‹‰/ì‹œìŠ¤í…œ ì‹œê³„
- [ ] `wasi:random` â€” CSPRNG ê¸°ë°˜ ë‚œìˆ˜
- [ ] `wasi:io` â€” ìŠ¤íŠ¸ë¦¼ ì½ê¸°/ì“°ê¸° (stdin, stdout, stderr)
- [ ] `wasi:cli` â€” ëª…ë ¹í–‰ ì¸ìˆ˜, í™˜ê²½ ë³€ìˆ˜, ì¢…ë£Œ ì½”ë“œ
- [ ] `wasi:http` â€” HTTP ìš”ì²­ ë°œì‹  (outgoing handler)
- [ ] íŒŒì¼ ë””ìŠ¤í¬ë¦½í„° ì‚¬ì „ ì—´ê¸° (preopened dirs) â€” ìƒŒë“œë°•ìŠ¤ ê²½ê³„
- [ ] Capability ê¸°ë°˜ íŒŒì¼ì‹œìŠ¤í…œ ì ‘ê·¼ (ì•±ë³„ í™ˆ ë””ë ‰í† ë¦¬ë§Œ ê¸°ë³¸ í—ˆìš©)

### 7.3.2 WASM Component Model

ë‹¤ìˆ˜ì˜ WASM ëª¨ë“ˆì„ ì¡°í•©í•˜ì—¬ ì•±ì„ êµ¬ì„±í•˜ëŠ” ì»´í¬ë„ŒíŠ¸ ëª¨ë¸:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            WASM Component                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ Core Module â”‚   â”‚ Import (WASI/Host) â”‚â”‚
â”‚  â”‚ (ì•± ë¡œì§)   â”‚â”€â”€â”€â”‚ wasi:filesystem    â”‚â”‚
â”‚  â”‚             â”‚   â”‚ wasi:sockets       â”‚â”‚
â”‚  â”‚             â”‚   â”‚ kpio:gui           â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ Export (WIT ì¸í„°í˜ì´ìŠ¤)             â”‚  â”‚
â”‚  â”‚ run() â†’ result                     â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ì²´í¬ë¦¬ìŠ¤íŠ¸:**
- [ ] WIT (WebAssembly Interface Type) íŒŒì„œ
- [ ] Component ë§ì»¤: import/export í•´ì„ ë° ë°”ì¸ë”©
- [ ] ì¸í„°í˜ì´ìŠ¤ íƒ€ì… ë³€í™˜ (string, list, record, variant, enum, flags)
- [ ] ì»´í¬ë„ŒíŠ¸ í•©ì„± (ì—¬ëŸ¬ .wasm â†’ í•˜ë‚˜ì˜ ì‹¤í–‰ ë‹¨ìœ„)
- [ ] `kpio:gui` ì»¤ìŠ¤í…€ ì›”ë“œ: KPIO GUI API ë°”ì¸ë”©
  - `create-window(title, width, height) â†’ window-handle`
  - `draw-rect(handle, x, y, w, h, color)`
  - `draw-text(handle, x, y, text, size)`
  - `on-event(handle) â†’ event`
  - `request-frame(handle)`
- [ ] `kpio:system` ì»¤ìŠ¤í…€ ì›”ë“œ: ì‹œìŠ¤í…œ ì •ë³´ API
  - `get-time() â†’ datetime`
  - `get-hostname() â†’ string`
  - `notify(title, body)`

### 7.3.3 JIT ì»´íŒŒì¼ëŸ¬ í™œì„±í™”

ê¸°ì¡´ `runtime/src/jit.rs`ì˜ JIT êµ¬ì¡°ë¥¼ ì‹¤ì œ ì½”ë“œ ìƒì„±ìœ¼ë¡œ í™•ì¥:

**ì²´í¬ë¦¬ìŠ¤íŠ¸:**
- [ ] Baseline JIT: WASM ë°”ì´íŠ¸ì½”ë“œ â†’ x86_64 ê¸°ê³„ì–´ 1:1 ë³€í™˜
  - ì •ìˆ˜/ë¶€ë™ì†Œìˆ˜ì  ì—°ì‚°
  - ì œì–´ íë¦„ (br, br_if, block, loop, if)
  - ë©”ëª¨ë¦¬ ì ‘ê·¼ (load/store + ë°”ìš´ë“œ ì²´í¬)
  - í•¨ìˆ˜ í˜¸ì¶œ (direct + indirect)
- [ ] ì‹¤í–‰ ê°€ëŠ¥ ë©”ëª¨ë¦¬ í• ë‹¹ (W^X ì¤€ìˆ˜: write â†’ mprotect â†’ execute)
- [ ] Tiered compilation:
  - ì½œë“œ: ì¸í„°í”„ë¦¬í„° (wasmi)
  - ì›œ (í˜¸ì¶œ 100íšŒ): Baseline JIT
  - í•« (í˜¸ì¶œ 10,000íšŒ): í–¥í›„ Optimizing JIT (Phase 7 ì´í›„)
- [ ] ì½”ë“œ ìºì‹œ: ì»´íŒŒì¼ëœ ê¸°ê³„ì–´ ë””ìŠ¤í¬ ì˜ì†í™” (AOT ìºì‹œ)
- [ ] ë²¤ì¹˜ë§ˆí¬: `wasmi` ëŒ€ë¹„ 5-10x ì„±ëŠ¥ í–¥ìƒ ëª©í‘œ

### 7.3.4 WASM ì•± íŒ¨í‚¤ì§• ë° ì‹¤í–‰

**ì²´í¬ë¦¬ìŠ¤íŠ¸:**
- [ ] `.kpioapp` íŒ¨í‚¤ì§€ í¬ë§· ì •ì˜:
  ```
  my-app.kpioapp (ZIP)
  â”œâ”€â”€ manifest.toml        # AppDescriptor
  â”œâ”€â”€ app.wasm              # ë©”ì¸ WASM ëª¨ë“ˆ
  â”œâ”€â”€ resources/            # ì•„ì´ì½˜, ì—ì…‹
  â”‚   â”œâ”€â”€ icon-192.png
  â”‚   â””â”€â”€ icon-512.png
  â””â”€â”€ wit/                  # WIT ì¸í„°í˜ì´ìŠ¤ ì •ì˜ (ì„ íƒ)
      â””â”€â”€ world.wit
  ```
- [ ] íŒ¨í‚¤ì§€ ê²€ì¦: ì‹œê·¸ë‹ˆì²˜ í™•ì¸, manifest ìœ íš¨ì„±
- [ ] WASM ì•± ëŸ°ì²˜: `.kpioapp` â†’ ì–¸íŒ© â†’ ì¸ìŠ¤í„´ìŠ¤í™” â†’ ì‹¤í–‰
- [ ] WASM ì•± ì—…ë°ì´íŠ¸: ë²„ì „ ë¹„êµ, ì°¨ë¶„ ë‹¤ìš´ë¡œë“œ
- [ ] ìƒ˜í”Œ ì•± ì œê³µ:
  - `hello-world.kpioapp` (ì½˜ì†” ì¶œë ¥)
  - `calculator.kpioapp` (GUI ê³„ì‚°ê¸°)
  - `text-editor.kpioapp` (í…ìŠ¤íŠ¸ í¸ì§‘ê¸°)

### 7.3.5 í¬ë¡œìŠ¤ ì»´íŒŒì¼ ì§€ì›

ë‹¤ë¥¸ OS ì•±ì„ WASMìœ¼ë¡œ ë³€í™˜í•˜ì—¬ KPIOì—ì„œ ì‹¤í–‰í•˜ëŠ” ê²½ë¡œ:

**ì²´í¬ë¦¬ìŠ¤íŠ¸:**
- [ ] ë¬¸ì„œ: C/C++ â†’ WASM (wasi-sdk/Emscripten) ê°€ì´ë“œ
- [ ] ë¬¸ì„œ: Rust â†’ WASM (cargo build --target wasm32-wasip2) ê°€ì´ë“œ
- [ ] ë¬¸ì„œ: Go â†’ WASM (GOOS=wasip1) ê°€ì´ë“œ
- [ ] ë¬¸ì„œ: Python â†’ WASM (PyOdide/CPython WASM) ê°€ì´ë“œ
- [ ] POSIX í˜¸í™˜ ì‹¬ ë¼ì´ë¸ŒëŸ¬ë¦¬ (libc ì„œë¸Œì…‹ â†’ WASI ë§¤í•‘)
  - `open/read/write/close/stat/mkdir/rmdir`
  - `socket/connect/bind/listen/accept/send/recv`
  - `malloc/free/mmap` (WASM ì„ í˜• ë©”ëª¨ë¦¬ ìœ„)
  - `pthreads` ê¸°ë³¸ (wasm-threads proposal ê¸°ë°˜)
- [ ] SDL2 â†’ `kpio:gui` ë³€í™˜ ë ˆì´ì–´ (ê²Œì„/ë©€í‹°ë¯¸ë””ì–´ ì•±ìš©)

---

## Phase 7.4: Linux ë°”ì´ë„ˆë¦¬ í˜¸í™˜ ë ˆì´ì–´ â€” ğŸŸ¡ ì„ íƒ

> **ëª©í‘œ:** ì •ì  ë§í¬ëœ Linux x86_64 ELF ë°”ì´ë„ˆë¦¬ë¥¼ KPIO ìœ„ì—ì„œ ì§ì ‘ ì‹¤í–‰í•œë‹¤.  
> **ì˜ˆìƒ ê¸°ê°„:** 2-3ì£¼  
> **ì˜ì¡´ì„±:** Phase 7.1  
> **ë²”ìœ„ ì œí•œ:** ë™ì  ë§í¬(glibc/ld-linux.so) ë° GUI ì•±(X11/Wayland)ì€ ì§€ì›í•˜ì§€ ì•ŠìŒ.

### ì„¤ê³„ ì›ì¹™: "ë¬´ê²ì§€ ì•Šì€" í˜¸í™˜ì„±

ì „ì²´ Linux ABI ì—ë®¬ë ˆì´ì…˜ì´ ì•„ë‹Œ, **ì‹¤ìš©ì  ì„œë¸Œì…‹**ë§Œ êµ¬í˜„:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        Linux ELF Binary            â”‚
â”‚    (statically linked, musl)       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚ syscall (int 0x80 / syscall)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    Linux Syscall Translation Layer  â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚    â”‚ Linux syscall # â†’ KPIO     â”‚  â”‚
â”‚    â”‚ sys_write â†’ SYS_WRITE      â”‚  â”‚
â”‚    â”‚ sys_read  â†’ SYS_READ       â”‚  â”‚
â”‚    â”‚ sys_open  â†’ SYS_OPEN       â”‚  â”‚
â”‚    â”‚ ...                         â”‚  â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚ KPIO syscall
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          KPIO Kernel                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 7.4.1 ELF ë¡œë”

**ì²´í¬ë¦¬ìŠ¤íŠ¸:**
- [ ] ELF64 í—¤ë” íŒŒì‹± (ë§¤ì§ ë„˜ë²„, ì—”ë””ì•ˆ, ABI ê²€ì¦)
- [ ] Program Header ì²˜ë¦¬:
  - `PT_LOAD`: ì„¸ê·¸ë¨¼íŠ¸ë¥¼ ìœ ì €ìŠ¤í˜ì´ìŠ¤ ë©”ëª¨ë¦¬ì— ë§¤í•‘
  - `PT_INTERP`: ë™ì  ë§ì»¤ ìš”ì²­ ì‹œ ê±°ë¶€ (ì •ì  ì „ìš©)
  - `PT_GNU_STACK`: NX ë¹„íŠ¸ ì„¤ì •
- [ ] ì—”íŠ¸ë¦¬ í¬ì¸íŠ¸ (`e_entry`) ì¶”ì¶œ ë° ì í”„
- [ ] ìœ ì €ìŠ¤í˜ì´ìŠ¤ ìŠ¤íƒ ì…‹ì—…: `argc`, `argv[]`, `envp[]`, auxv[]
- [ ] Auxiliary Vector (AT_PAGESZ, AT_CLKTCK, AT_RANDOM ë“±)
- [ ] PIE (Position Independent Executable) ì§€ì›: ASLR ì ìš©ëœ ë² ì´ìŠ¤ ì£¼ì†Œ
- [ ] BSS ì„¸ê·¸ë¨¼íŠ¸ ì œë¡œ ì´ˆê¸°í™”

### 7.4.2 Linux ì‹œìŠ¤ì½œ ë²ˆì—­ ë ˆì´ì–´

~40ê°œ í•µì‹¬ ì‹œìŠ¤ì½œë§Œ êµ¬í˜„í•˜ì—¬ CLI ë„êµ¬ ëŒ€ë¶€ë¶„ ì»¤ë²„:

```
í•„ìˆ˜ ì‹œìŠ¤ì½œ (Tier A â€” ëŒ€ë¶€ë¶„ì˜ CLI ë„êµ¬ ì‹¤í–‰ ê°€ëŠ¥):
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
read(0), write(1), open(2), close(3), stat(4), fstat(5),
lseek(8), mmap(9), mprotect(10), munmap(11), brk(12),
ioctl(16)â€ , access(21), pipe(22), dup(32), dup2(33),
getpid(39), fork(57)â€ , execve(59)â€ , exit(60), wait4(61),
kill(62)â€ , uname(63), fcntl(72)â€ , getcwd(79), chdir(80),
mkdir(83), unlink(87), readlink(89), getuid(102), getgid(104),
gettimeofday(96), nanosleep(35), clock_gettime(228),
exit_group(231), openat(257), readlinkat(267),
arch_prctl(158), set_tid_address(218), set_robust_list(273)
```
> â€  = ë¶€ë¶„ êµ¬í˜„ (ìŠ¤í… ë˜ëŠ” ì„œë¸Œì…‹)

**ì²´í¬ë¦¬ìŠ¤íŠ¸:**
- [ ] `syscall` ëª…ë ¹ì–´ ì¸í„°ì…‰íŠ¸ (ìœ ì €ìŠ¤í˜ì´ìŠ¤ â†’ ì»¤ë„ ì „í™˜ ì‹œ)
- [ ] Linux ì‹œìŠ¤ì½œ ë²ˆí˜¸ â†’ KPIO ì‹œìŠ¤ì½œ ë¼ìš°íŒ… í…Œì´ë¸”
- [ ] Tier A ì‹œìŠ¤ì½œ 40ê°œ êµ¬í˜„:
  - [ ] íŒŒì¼ I/O: `read`, `write`, `open`, `close`, `stat`, `fstat`, `lseek`, `access`, `openat`
  - [ ] ë©”ëª¨ë¦¬: `mmap`, `mprotect`, `munmap`, `brk`
  - [ ] í”„ë¡œì„¸ìŠ¤: `getpid`, `exit`, `exit_group`, `uname`, `arch_prctl`
  - [ ] ë””ë ‰í† ë¦¬: `getcwd`, `chdir`, `mkdir`, `unlink`, `readlink`
  - [ ] íŒŒì´í”„/FD: `pipe`, `dup`, `dup2`, `fcntl`
  - [ ] ì‹œê°„: `gettimeofday`, `nanosleep`, `clock_gettime`
  - [ ] ì•„ì´ë´í‹°í‹°: `getuid`, `getgid` (ë‹¨ì¼ ì‚¬ìš©ì â†’ í•­ìƒ 0)
  - [ ] ìŠ¤ë ˆë”© ë³´ì¡°: `set_tid_address`, `set_robust_list` (ìŠ¤í…)
- [ ] ë¯¸ì§€ì› ì‹œìŠ¤ì½œ í•¸ë“¤ë§: `ENOSYS` ë°˜í™˜ + ë¡œê·¸
- [ ] errno ë§¤í•‘ í…Œì´ë¸” (Linux errno â†’ KPIO errno)
- [ ] ì‹ í˜¸ ê¸°ë³¸ ì²˜ë¦¬: `SIGTERM` â†’ í”„ë¡œì„¸ìŠ¤ ì¢…ë£Œ, `SIGKILL` â†’ ì¦‰ì‹œ ì¢…ë£Œ

### 7.4.3 í˜¸í™˜ì„± í…ŒìŠ¤íŠ¸

**ì²´í¬ë¦¬ìŠ¤íŠ¸:**
- [ ] BusyBox (ì •ì  musl ë¹Œë“œ) ì‹¤í–‰:
  - `busybox ls`, `busybox cat`, `busybox grep`, `busybox wc`
  - `busybox echo`, `busybox head`, `busybox tail`
  - `busybox sort`, `busybox uniq`, `busybox tr`
- [ ] ì •ì  ë§í¬ Rust ë°”ì´ë„ˆë¦¬ (hello world, íŒŒì¼ I/O)
- [ ] ì •ì  ë§í¬ Go ë°”ì´ë„ˆë¦¬ (hello world, HTTP ì„œë²„)
- [ ] ì •ì  ë§í¬ C ë°”ì´ë„ˆë¦¬ (musl-gcc, ê¸°ë³¸ ì‹œìŠ¤í…œ í”„ë¡œê·¸ë˜ë°)
- [ ] í˜¸í™˜ì„± ë§¤íŠ¸ë¦­ìŠ¤ ë¬¸ì„œí™” (ì§€ì›/ë¯¸ì§€ì› ì‹œìŠ¤ì½œ ëª©ë¡)

### 7.4.4 ì œí•œ ì‚¬í•­ ë° ëŒ€ì•ˆ ê²½ë¡œ

ì§€ì›í•˜ì§€ ì•ŠëŠ” ì˜ì—­ê³¼ ê¶Œì¥ ëŒ€ì•ˆ:

| ë¶ˆê°€ | ì‚¬ìœ  | ëŒ€ì•ˆ |
|------|------|------|
| ë™ì  ë§í¬ ELF | ld-linux.so + glibc ì „ì²´ êµ¬í˜„ í•„ìš” | ì •ì  ë§í¬ (musl) ë¹Œë“œ ê¶Œì¥ |
| X11/Wayland GUI | ë””ìŠ¤í”Œë ˆì´ ì„œë²„ í”„ë¡œí† ì½œ ê±°ëŒ€í•¨ | WASM + `kpio:gui` ë°”ì¸ë”© ì‚¬ìš© |
| Linux ì»¤ë„ ëª¨ë“ˆ | ì»¤ë„ ABI í˜¸í™˜ ë¶ˆê°€ | KPIO ì „ìš© ë“œë¼ì´ë²„ ì‘ì„± |
| ptrace/seccomp | ë³µì¡í•œ ì»¤ë„ ê¸°ëŠ¥ | WASM ìƒŒë“œë°•ìŠ¤ í™œìš© |
| Systemd/Init | ì„œë¹„ìŠ¤ ë§¤ë‹ˆì € í˜¸í™˜ ë¶ˆí•„ìš” | KPIO ì•± ë§¤ë‹ˆì € ì‚¬ìš© |

---

## Phase 7.5: ì•± ë°°í¬ ë° ê´€ë¦¬ (App Distribution)

> **ëª©í‘œ:** ì•± ê²€ìƒ‰, ì„¤ì¹˜, ì—…ë°ì´íŠ¸, ì œê±°ë¥¼ ìœ„í•œ í†µí•© ì•± ê´€ë¦¬ ì‹œìŠ¤í…œì„ êµ¬ì¶•í•œë‹¤.  
> **ì˜ˆìƒ ê¸°ê°„:** 1-2ì£¼  
> **ì˜ì¡´ì„±:** Phase 7.1, Phase 6.1 (ë„¤íŠ¸ì›Œí¬)

### 7.5.1 ì•± ìŠ¤í† ì–´ í´ë¼ì´ì–¸íŠ¸

**ì²´í¬ë¦¬ìŠ¤íŠ¸:**
- [ ] ì•± ì¹´íƒˆë¡œê·¸ UI (ê·¸ë¦¬ë“œ/ë¦¬ìŠ¤íŠ¸ ë·°)
- [ ] ì¹´í…Œê³ ë¦¬ ë¸Œë¼ìš°ì§• (ìƒì‚°ì„±, ê²Œì„, ìœ í‹¸ë¦¬í‹°, ê°œë°œ ë„êµ¬, ë¯¸ë””ì–´)
- [ ] ê²€ìƒ‰ ê¸°ëŠ¥ (ì´ë¦„, ì„¤ëª…, í‚¤ì›Œë“œ)
- [ ] ì•± ìƒì„¸ í˜ì´ì§€ (ìŠ¤í¬ë¦°ìƒ·, ì„¤ëª…, ê¶Œí•œ ëª©ë¡, ë²„ì „ ê¸°ë¡)
- [ ] ì„¤ì¹˜/ì œê±° ë²„íŠ¼ + ì§„í–‰ë¥  í‘œì‹œ
- [ ] ì¹´íƒˆë¡œê·¸ ì†ŒìŠ¤ ì„¤ì •:
  - ë¡œì»¬ ì €ì¥ì†Œ (USB/VFS)
  - HTTP ê¸°ë°˜ ì›ê²© ì €ì¥ì†Œ (URL ë“±ë¡)
  - ê¸°ë³¸ ì œê³µ ì‹œìŠ¤í…œ ì•± ëª©ë¡

### 7.5.2 íŒ¨í‚¤ì§€ ê´€ë¦¬

**ì²´í¬ë¦¬ìŠ¤íŠ¸:**
- [ ] íŒ¨í‚¤ì§€ í¬ë§· ìœ íš¨ì„± ê²€ì¦ (`.kpioapp`, `.wasm`, ì›¹ URL)
- [ ] ë””ì§€í„¸ ì„œëª… ê²€ì¦ (Ed25519):
  - ê°œë°œì ì„œëª… â†’ ê³µê°œí‚¤ ê¸°ë°˜ ê²€ì¦
  - ì„ íƒì  ìŠ¤í† ì–´ ì„œëª… (ì¶”ê°€ ì‹ ë¢° ê³„ì¸µ)
- [ ] ì˜ì¡´ì„± í•´ì„ (WASM ì»´í¬ë„ŒíŠ¸ ê°„)
- [ ] ìë™ ì—…ë°ì´íŠ¸:
  - ë°±ê·¸ë¼ìš´ë“œ ì—…ë°ì´íŠ¸ ì²´í¬ (ì£¼ê¸°ì )
  - ì‚¬ìš©ì í™•ì¸ í›„ ì—…ë°ì´íŠ¸ ì ìš©
  - ë¡¤ë°± ì§€ì› (ì´ì „ ë²„ì „ ë³´ê´€)
- [ ] ì €ì¥ ê³µê°„ ê´€ë¦¬: ì•± í¬ê¸° í‘œì‹œ, ìºì‹œ ì •ë¦¬, ëŒ€ìš©ëŸ‰ ì•± ê²½ê³ 

### 7.5.3 ê°œë°œì ë„êµ¬

**ì²´í¬ë¦¬ìŠ¤íŠ¸:**
- [ ] `kpio-sdk` CLI (í˜¸ìŠ¤íŠ¸ OSì—ì„œ ì‹¤í–‰):
  - `kpio build` â€” WASM ì•± ë¹Œë“œ
  - `kpio package` â€” `.kpioapp` íŒ¨í‚¤ì§•
  - `kpio sign` â€” íŒ¨í‚¤ì§€ ì„œëª…
  - `kpio validate` â€” ë§¤ë‹ˆí˜ìŠ¤íŠ¸/WASM ê²€ì¦
  - `kpio run --emulate` â€” í˜¸ìŠ¤íŠ¸ì—ì„œ ì—ë®¬ë ˆì´ì…˜ ì‹¤í–‰
- [ ] í…œí”Œë¦¿:
  - Rust WASM ì•± í…œí”Œë¦¿
  - C/C++ WASI ì•± í…œí”Œë¦¿
  - ì›¹ ì•± (PWA) í…œí”Œë¦¿
- [ ] ê°œë°œì ë¬¸ì„œ: API ë ˆí¼ëŸ°ìŠ¤, íŠœí† ë¦¬ì–¼, ìƒ˜í”Œ ì½”ë“œ

---

## Phase 7.6: í¬ë¡œìŠ¤ í”Œë«í¼ í†µí•© (Cross-Platform Integration)

> **ëª©í‘œ:** ëª¨ë“  ì•± ìœ í˜• ê°„ ì¼ê´€ëœ ì‹œìŠ¤í…œ í†µí•© ê²½í—˜ì„ ì œê³µí•œë‹¤.  
> **ì˜ˆìƒ ê¸°ê°„:** 1-2ì£¼  
> **ì˜ì¡´ì„±:** Phase 7.1-7.3

### 7.6.1 í†µí•© í´ë¦½ë³´ë“œ

**ì²´í¬ë¦¬ìŠ¤íŠ¸:**
- [ ] ì‹œìŠ¤í…œ í´ë¦½ë³´ë“œ ì„œë¹„ìŠ¤ (í…ìŠ¤íŠ¸, ë¦¬ì¹˜ í…ìŠ¤íŠ¸, ì´ë¯¸ì§€)
- [ ] ì•± ê°„ ë³µì‚¬/ë¶™ì—¬ë„£ê¸° (WASM â†” ì›¹ì•± â†” ë„¤ì´í‹°ë¸Œ)
- [ ] MIME íƒ€ì… ê¸°ë°˜ ë°ì´í„° í˜‘ìƒ
- [ ] í´ë¦½ë³´ë“œ íˆìŠ¤í† ë¦¬ (ìµœê·¼ 10ê°œ)

### 7.6.2 íŒŒì¼ ì—°ê²° (File Association)

**ì²´í¬ë¦¬ìŠ¤íŠ¸:**
- [ ] MIME íƒ€ì… â†’ ê¸°ë³¸ ì•± ë§¤í•‘ í…Œì´ë¸”
- [ ] íŒŒì¼ í™•ì¥ì â†’ MIME íƒ€ì… ë§¤í•‘
- [ ] "ë‹¤ìŒìœ¼ë¡œ ì—´ê¸°" ì„ íƒ ë‹¤ì´ì–¼ë¡œê·¸
- [ ] ì•± ë§¤ë‹ˆí˜ìŠ¤íŠ¸ì— `file_handlers` ì„ ì–¸:
  ```toml
  [[file_handlers]]
  action = "open"
  accept = { "text/plain" = [".txt", ".md", ".log"] }
  ```
- [ ] íŒŒì¼ íƒìƒ‰ê¸°ì—ì„œ ë”ë¸” í´ë¦­ â†’ ì—°ê²°ëœ ì•± ì‹¤í–‰

### 7.6.3 ë“œë˜ê·¸ ì•¤ ë“œë¡­

**ì²´í¬ë¦¬ìŠ¤íŠ¸:**
- [ ] ìœˆë„ìš° ê°„ ë“œë˜ê·¸ ì•¤ ë“œë¡­ í”„ë¡œí† ì½œ
- [ ] íŒŒì¼ ë“œë˜ê·¸: ì†ŒìŠ¤ ì•± â†’ ì‹œìŠ¤í…œ â†’ íƒ€ê²Ÿ ì•±
- [ ] í…ìŠ¤íŠ¸/ì´ë¯¸ì§€ ë“œë˜ê·¸
- [ ] ë“œë˜ê·¸ í”„ë¦¬ë·° (ê³ ìŠ¤íŠ¸ ì´ë¯¸ì§€)
- [ ] ë“œë¡­ íƒ€ê²Ÿ í•˜ì´ë¼ì´íŠ¸

### 7.6.4 ì‹œìŠ¤í…œ íŠ¸ë ˆì´ ë° ìƒíƒœ ë°” í†µí•©

**ì²´í¬ë¦¬ìŠ¤íŠ¸:**
- [ ] ì•±ë³„ ì‹œìŠ¤í…œ íŠ¸ë ˆì´ ì•„ì´ì½˜ ë“±ë¡ API
- [ ] íŠ¸ë ˆì´ ì•„ì´ì½˜ ì»¨í…ìŠ¤íŠ¸ ë©”ë‰´
- [ ] ë°°ì§€/ì•Œë¦¼ ì¹´ìš´íŠ¸ í‘œì‹œ
- [ ] ë°±ê·¸ë¼ìš´ë“œ ì•± ìƒíƒœ ì¸ë””ì¼€ì´í„°

---

## êµ¬í˜„ ë¡œë“œë§µ

```
ì£¼ì°¨     1    2    3    4    5    6    7    8    9   10   11   12
        â”œâ”€â”€â”€â”€â”¤â”€â”€â”€â”€â”¤â”€â”€â”€â”€â”¤â”€â”€â”€â”€â”¤â”€â”€â”€â”€â”¤â”€â”€â”€â”€â”¤â”€â”€â”€â”€â”¤â”€â”€â”€â”€â”¤â”€â”€â”€â”€â”¤â”€â”€â”€â”€â”¤â”€â”€â”€â”€â”¤â”€â”€â”€â”€â”¤
 7.1    â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ                                            ì•± ëŸ°íƒ€ì„ ê¸°ë°˜
 7.2                    â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ                       ì›¹ ì•± í”Œë«í¼
 7.3                    â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ                       WASM/WASI ëŸ°íƒ€ì„
 7.4                                          â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ      Linux í˜¸í™˜ ë ˆì´ì–´
 7.5                                          â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ            ì•± ë°°í¬/ê´€ë¦¬
 7.6                                                    â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ   í¬ë¡œìŠ¤ í”Œë«í¼ í†µí•©
```

> 7.2ì™€ 7.3ì€ ë³‘ë ¬ ì§„í–‰ ê°€ëŠ¥ (ê¸°ë°˜ì¸ 7.1ë§Œ ì„ í–‰ ì™„ë£Œ í•„ìš”)  
> 7.4ëŠ” ì„ íƒ ì‚¬í•­ì´ë©°, 7.5/7.6ê³¼ ë³‘ë ¬ ê°€ëŠ¥  

---

## ì„±ê³µ ê¸°ì¤€

### í•„ìˆ˜ (Must Have)
- [ ] PWA ì„¤ì¹˜ ë° ì˜¤í”„ë¼ì¸ ì‹¤í–‰ (ìµœì†Œ 1ê°œ ë°ëª¨ ì•±)
- [ ] WASM/WASI ì•± `.kpioapp` íŒ¨í‚¤ì§€ ì‹¤í–‰ (GUI ì•± í¬í•¨)
- [ ] ì•± ê°„ ê²©ë¦¬ (í¬ë˜ì‹œ ì „íŒŒ ì—†ìŒ)
- [ ] ì•± ì„¤ì¹˜/ì œê±° ë¼ì´í”„ì‚¬ì´í´ ì™„ì „ ë™ì‘
- [ ] Baseline JITìœ¼ë¡œ WASM ì•± 5x ì„±ëŠ¥ í–¥ìƒ

### ë°”ëŒì§ (Should Have)
- [ ] BusyBox ê¸°ë³¸ ëª…ë ¹ì–´ 10ê°œ ì´ìƒ Linux ELF í˜¸í™˜ ì‹¤í–‰
- [ ] ì•± ìŠ¤í† ì–´ UI (ë¡œì»¬ ì €ì¥ì†Œ ê¸°ë°˜)
- [ ] ì•± ê°„ í´ë¦½ë³´ë“œ ì—°ë™
- [ ] íŒŒì¼ ì—°ê²° (ë”ë¸” í´ë¦­ â†’ ì•± ì‹¤í–‰)

### ì„ íƒ (Nice to Have)
- [ ] ì›ê²© ì•± ì €ì¥ì†Œ ì§€ì›
- [ ] ìë™ ì—…ë°ì´íŠ¸
- [ ] SDL2 â†’ `kpio:gui` ë³€í™˜ ë ˆì´ì–´
- [ ] WASM Component Model í•©ì„±

---

## ê¸°ìˆ  ìœ„í—˜ ë° ì™„í™”

| ìœ„í—˜ | ì˜í–¥ | í™•ë¥  | ì™„í™” |
|------|------|------|------|
| JIT ì»´íŒŒì¼ëŸ¬ ë²„ê·¸ (ë³´ì•ˆ ì·¨ì•½ì ) | ğŸ”´ ë†’ìŒ | ì¤‘ê°„ | W^X ê°•ì œ, í¼ì§• í…ŒìŠ¤íŠ¸, ì¸í„°í”„ë¦¬í„° í´ë°± |
| Service Worker JS ì‹¤í–‰ ë³µì¡ë„ | ğŸŸ¡ ì¤‘ê°„ | ë†’ìŒ | Phase 6.3 JS ì—”ì§„ ì™„ì„±ë„ì— ì˜ì¡´ â†’ ë‹¨ìˆœ ìºì‹œ ì „ëµë¶€í„° êµ¬í˜„ |
| ELF ë¡œë” ë©”ëª¨ë¦¬ ì•ˆì „ì„± | ğŸ”´ ë†’ìŒ | ì¤‘ê°„ | ìœ ì €ìŠ¤í˜ì´ìŠ¤ ê²©ë¦¬, ASLR, ì‹œìŠ¤ì½œ í•„í„°ë§ |
| WASM Component Model ë³µì¡ë„ | ğŸŸ¡ ì¤‘ê°„ | ì¤‘ê°„ | MVP (ë‹¨ì¼ ëª¨ë“ˆ) ë¨¼ì € â†’ ì»´í¬ë„ŒíŠ¸ í•©ì„±ì€ í›„ìˆœìœ„ |
| ì•± ìƒíƒœê³„ ë¶€ì¬ (nobody writes apps) | ğŸŸ¡ ì¤‘ê°„ | ë†’ìŒ | ìƒ˜í”Œ ì•± ë‹¤ìˆ˜ ì œê³µ + ê¸°ì¡´ WASI ì•± í˜¸í™˜ + í¬ë¡œìŠ¤ ì»´íŒŒì¼ ê°€ì´ë“œ |

---

## ìƒˆë¡œìš´ í¬ë ˆì´íŠ¸/ëª¨ë“ˆ êµ¬ì¡°

```
kernel/src/
  app/                    # ìƒˆë¡œ ì¶”ê°€
    mod.rs                # AppManager, AppRegistry
    lifecycle.rs          # ë¼ì´í”„ì‚¬ì´í´ ê´€ë¦¬
    sandbox.rs            # Capability ê¸°ë°˜ ìƒŒë“œë°•ìŠ¤
    ipc_bus.rs            # ì•± ê°„ IPC ë¼ìš°íŒ…
    manifest.rs           # AppDescriptor íŒŒì‹±
    store.rs              # ì•± ìŠ¤í† ì–´ í´ë¼ì´ì–¸íŠ¸
    file_assoc.rs         # íŒŒì¼ ì—°ê²°
  elf/                    # ìƒˆë¡œ ì¶”ê°€
    loader.rs             # ELF64 íŒŒì„œ/ë¡œë”
    linux_abi.rs           # Linux ì‹œìŠ¤ì½œ ë²ˆì—­ ë ˆì´ì–´

kpio-browser/src/
  pwa/                    # í™•ì¥
    manifest.rs           # Web App Manifest íŒŒì„œ
    service_worker.rs     # SW ëŸ°íƒ€ì„
    cache.rs              # Cache Storage API
    install.rs            # ì„¤ì¹˜ UX
    storage.rs            # localStorage/IndexedDB

runtime/src/
  wasi.rs                 # í™•ì¥ (WASI Preview 2 ì™„ì „ êµ¬í˜„)
  component.rs            # ìƒˆë¡œ ì¶”ê°€ (Component Model)
  jit.rs                  # í™•ì¥ (Baseline JIT ì‹¤ êµ¬í˜„)
  app_host.rs             # ìƒˆë¡œ ì¶”ê°€ (kpio:gui, kpio:system í˜¸ìŠ¤íŠ¸ í•¨ìˆ˜)
  package.rs              # ìƒˆë¡œ ì¶”ê°€ (.kpioapp íŒ¨í‚¤ì§€ ì²˜ë¦¬)
```

---

## Phase 6ê³¼ì˜ ê´€ê³„

Phase 7ì€ Phase 6ì˜ **ì†Œë¹„ì**ì´ë‹¤:

- **Phase 6.3** (JS ì—”ì§„) â†’ 7.2 Service Worker ì‹¤í–‰ì— í•„ìˆ˜
- **Phase 6.5** (Web Platform API) â†’ 7.2 Cache API, Notification APIì— í•„ìˆ˜
- **Phase 6.8** (PWA ê¸°ë°˜) â†’ 7.2ì™€ ë‚´ìš© ì¤‘ë³µ â†’ **7.2ê°€ ì´ë¥¼ í¡ìˆ˜/ëŒ€ì²´**
- **Phase 6.9** (í”„ë ˆì„ì›Œí¬ í˜¸í™˜) â†’ ì›¹ì•± í’ˆì§ˆ í–¥ìƒì— ê¸°ì—¬

Phase 6.3ì´ ì™„ì„±ë  ë•Œê¹Œì§€ 7.2ì˜ Service WorkerëŠ” **ìºì‹œ ì „ìš© ëª¨ë“œ** (JS ì—†ì´ URL íŒ¨í„´ ë§¤ì¹­ ê¸°ë°˜)ë¡œ ë™ì‘ ê°€ëŠ¥.

---

*ì´ ë¬¸ì„œëŠ” KPIO OSì˜ ì•± êµ¬ë™ ë ˆì´ì–´ ì„¤ê³„ ëª…ì„¸ì´ë‹¤. ì„¸ë¶€ êµ¬í˜„ì€ ê° ì„œë¸Œ í˜ì´ì¦ˆì˜ ì²´í¬ë¦¬ìŠ¤íŠ¸ë¥¼ ë”°ë¥¸ë‹¤.*
